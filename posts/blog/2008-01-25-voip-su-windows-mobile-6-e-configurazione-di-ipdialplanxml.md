---
title: "Voip su windows mobile 6 e configurazione di ipdialplan.xml"
tags: "post"
htmlClass: "html"
bodyClass: "body"
date: "2008-01-25"
permalink: "voip-su-windows-mobile-6-e-configurazione-di-ipdialplanxml/"
layout: "template_posts_md"
---
<p>Oggi ho configurato il mio PDA (Hermes con windows mobile 6) per connettersi a mytcom.it e sfruttare il loro servizio voip per telefonare a tariffe vantaggiose.<br />Dopo aver configurato il mio pda ed aver stabilito la connessione correttamente<br />come mostrato nei seguenti screenshot:<br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://bp2.blogger.com/_tPaw4zBlAc8/R5kl6-1ArJI/AAAAAAAAACI/Le4qksDVqpM/s1600-h/voip01.jpg"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer;" src="http://bp2.blogger.com/_tPaw4zBlAc8/R5kl6-1ArJI/AAAAAAAAACI/Le4qksDVqpM/s320/voip01.jpg" alt="" id="BLOGGER_PHOTO_ID_5159196543357594770" border="0" /></a><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://bp0.blogger.com/_tPaw4zBlAc8/R5kmDe1ArKI/AAAAAAAAACQ/94tRgNZOOqI/s1600-h/voip02.jpg"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer;" src="http://bp0.blogger.com/_tPaw4zBlAc8/R5kmDe1ArKI/AAAAAAAAACQ/94tRgNZOOqI/s320/voip02.jpg" alt="" id="BLOGGER_PHOTO_ID_5159196689386482850" border="0" /></a><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://bp2.blogger.com/_tPaw4zBlAc8/R5kmP-1ArLI/AAAAAAAAACY/IyR9RJkj5-Y/s1600-h/voip03.jpg"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer;" src="http://bp2.blogger.com/_tPaw4zBlAc8/R5kmP-1ArLI/AAAAAAAAACY/IyR9RJkj5-Y/s320/voip03.jpg" alt="" id="BLOGGER_PHOTO_ID_5159196904134847666" border="0" /></a><br />Ho fatto le classiche chiamate di prova ai numeri 690 e 695 e tutto funzionava correttamente.<br />Ho quindi aggiunto del credito al mio account e ho provato a chiamare numeri fissi o cellulari.<br />Ottenevo sempre un errore come il seguente:<br />&#8220;cannot complete the call phone number may not be valid&#8221;</p>
<p>Mi sono un po&#8217; scervellato per capire cosa potesse essere, ho chiesto aiuto al supporto di mytcom.it ma per loro tutto era ok (infatti funzionava tutto con i loro numeri di test)<br />fino a quando non ho capito&#8230;<br />il problema era la COMPOSIZIONE del numero, era impostato male il file<br /><strong>ipdialplan.xml</p>
<p></strong>Presente nell directory \windows sul mio pda</p>
<p>Dopo aver cercato un po&#8217; su internet ed aver trovato le seguenti informazioni:<br /><a href="http://forum.xda-developers.com/showthread.php?p=1846002">http://forum.xda-developers.com/showthread.php?p=1846002</a><br /><a href="http://msdn2.microsoft.com/en-us/library/bb202934.aspx">http://msdn2.microsoft.com/en-us/library/bb202934.aspx</a><br /><a href="http://msdn2.microsoft.com/en-us/library/aa921921.aspx">http://msdn2.microsoft.com/en-us/library/aa921921.aspx</a><br /><a href="http://msdn2.microsoft.com/en-us/library/aa921954.aspx">http://msdn2.microsoft.com/en-us/library/aa921954.aspx</a></p>
<p>mi sono deciso a modificarmi il file<br />ipdialplan.xml</p>
<p>che allego di seguito:<br />io l&#8217;ho provato con molti numeri che ho in rubrica, sia con il +39 che senza, sia fissi che cellulari e tutto sembra funzionare correttamente.</p>
<p>&lt;dialplan xmlns=&#8217;http://schemas.microsoft.com/embedded/VoIP&#8217;&gt;<br />    &lt;dialplan-header&gt;<br />        &lt;host&gt;#use_sipsrv_host_name#&lt;/host&gt;<br />    &lt;/dialplan-header&gt;<br />    &lt;!&#8211; Dial Plan rules &#8211;&gt;<br />    &lt;!&#8211; IP address rules &#8211;&gt;<br />    &lt;rule pattern=&#8217;\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}&#8217;<br />        restrict=&#8217;Cell,SMS&#8217;<br />        /&gt;<br />    &lt;rule pattern='(\d{1,3})\*(\d{1,3})\*(\d{1,3})\*(\d{1,3})&#8217;<br />        dial=&#8217;\1.\2.\3.\4&#8242;<br />        display=&#8217;\1.\2.\3.\4&#8242;<br />        transfer=&#8217;\1.\2.\3.\4&#8242;<br />        restrict=&#8217;Cell,SMS&#8217;<br />        /&gt;<br />    &lt;!&#8211; 11-digits rules &#8211;&gt;<br />    &lt;rule pattern=&#8217;1\s*-?\s*(\d{3})\s*-?\s*(\d{3})\s*-?\s*(\d{4})(\s*[Xx]\s*\d+)?&#8217;<br />        dial=&#8217;sip:91\1\2\3@$host$&#8217;<br />        display=&#8217;1 (\1) \2-\3&#8242;<br />        transfer=&#8217;sip:1\1\2\3@$host$&#8217;<br />        /&gt;<br />    &lt;rule pattern=&#8217;1\s*-?\s*\((\d{3})\)\s*-?\s*(\d{3})\s*-?\s*(\d{4})(\s*[Xx]\s*\d+)?&#8217;<br />        dial=&#8217;sip:91\1\2\3@$host$&#8217;<br />        display=&#8217;1 (\1) \2-\3&#8242;<br />        transfer=&#8217;sip:1\1\2\3@$host$&#8217;<br />        /&gt;<br />    &lt;rule pattern=&#8217;\+\s*1\s*-?\s*(\d{3})\s*-?\s*(\d{3})\s*-?\s*(\d{4})(\s*[Xx]\s*\d+)?&#8217;<br />        dial=&#8217;sip:91\1\2\3@$host$&#8217;<br />        display=&#8217;+1 (\1) \2-\3&#8242;<br />        transfer=&#8217;sip:1\1\2\3@$host$&#8217;<br />        /&gt;<br />    &lt;rule pattern=&#8217;\+\s*1\s*-?\s*\((\d{3})\)\s*-?\s*(\d{3})\s*-?\s*(\d{4})(\s*[Xx]\s*\d+)?&#8217;<br />        dial=&#8217;sip:91\1\2\3@$host$&#8217;<br />        display=&#8217;+1 (\1) \2-\3&#8242;<br />        transfer=&#8217;sip:1\1\2\3@$host$&#8217;<br />        /&gt;<br /> &lt;!&#8211; 11-cifre-by-maox-x-italy +39 33344455566&#8211;&gt;<br /> &lt;rule pattern=&#8217;\+\s*(\d{2})\s*(\d{11})&#8217;<br />        dial=&#8217;sip:\2@$host$&#8217;<br />        display=&#8217;+\1\2&#8242;<br />        transfer=&#8217;sip:\2@$host$&#8217;<br />        /&gt;<br /> &lt;!&#8211; 10-cifre-by-maox-x-italy +39 3334445556&#8211;&gt;<br /> &lt;rule pattern=&#8217;\+\s*(\d{2})\s*(\d{10})&#8217;<br />        dial=&#8217;sip:\2@$host$&#8217;<br />        display=&#8217;+\1\2&#8242;<br />        transfer=&#8217;sip:\2@$host$&#8217;<br />        /&gt;<br /> &lt;!&#8211; 9-cifre-by-maox-x-italy +39 3334445556&#8211;&gt;<br /> &lt;rule pattern=&#8217;\+\s*(\d{2})\s*(\d{9})&#8217;<br />        dial=&#8217;sip:\2@$host$&#8217;<br />        display=&#8217;+\1\2&#8242;<br />        transfer=&#8217;sip:\2@$host$&#8217;<br />        /&gt;<br /> &lt;!&#8211; 8-cifre-by-maox-x-italy +39 333444555&#8211;&gt;<br /> &lt;rule pattern=&#8217;\+\s*(\d{2})\s*(\d{8})&#8217;<br />        dial=&#8217;sip:\2@$host$&#8217;<br />        display=&#8217;+\1\2&#8242;<br />        transfer=&#8217;sip:\2@$host$&#8217;<br />        /&gt;<br /> &lt;!&#8211; qualsiasi-cifre-by-maox-x-italy 4916 oppure 695 oppure qualsiasi numero senza +39&#8211;&gt;<br /> &lt;rule pattern='(\d+)&#8217;<br />        dial=&#8217;sip:\1@$host$&#8217;<br />        display=&#8217;\1&#8242;<br />        transfer=&#8217;sip:\1@$host$&#8217;<br />        /&gt;<br /> &lt;!&#8211; 10-digits rules &#8211;&gt;<br />    &lt;rule pattern='(\d{3})\s*(\d{3})\s*-?\s*(\d{4})(\s*[Xx]\s*\d+)?&#8217;<br />        dial=&#8217;sip:9\1\2\3@$host$&#8217;<br />        display='(\1) \2-\3&#8242;<br />        transfer=&#8217;sip:\1\2\3@$host$&#8217;<br />        /&gt;<br />    &lt;rule pattern=&#8217;\((\d{3})\)\s*(\d{3})\s*-?\s*(\d{4})(\s*[Xx]\s*\d+)?&#8217;<br />        dial=&#8217;sip:9\1\2\3@$host$&#8217;<br />        display='(\1) \2-\3&#8242;<br />        transfer=&#8217;sip:\1\2\3@$host$&#8217;<br />        /&gt;<br />    &lt;!&#8211; 7-digits rules &#8211;&gt;<br />    &lt;rule pattern='(\d{3})\s*-?\s*(\d{4})&#8217;<br />        dial=&#8217;sip:9425\1\2@$host$&#8217;<br />        display=&#8217;\1-\2&#8242;<br />        transfer=&#8217;sip:425\1\2@$host$&#8217;<br />        /&gt;<br />    &lt;!&#8211; SIP URI rules &#8211;&gt;<br />    &lt;rule pattern='[Ss][Ii][Pp][Ss]?:\s*(\d{3})(\d{3})(\d{4})@(.+)&#8217;<br />        display='(\1) \2-\3&#8242;<br />        restrict=&#8217;Cell,SMS&#8217;<br />        /&gt;<br />    &lt;rule pattern='([Ss][Ii][Pp][Ss]?:)?\s*([a-zA-Z0-9_-]+)@(.+)&#8217;<br />        display=&#8217;\2&#8242;<br />        restrict=&#8217;Cell,SMS&#8217;<br />        /&gt;<br />    &lt;rule pattern='[Ss][Ii][Pp][Ss]?:\s*([^@]+)&#8217;<br />        display=&#8217;\1&#8242;<br />        restrict=&#8217;Cell,SMS&#8217;<br />        /&gt;<br />    &lt;!&#8211; 5-digits rules &#8211;&gt;<br />    &lt;rule pattern='(\d{3})-?(\d{2})&#8217;<br />        dial=&#8217;sip:\1\2@$host$&#8217;<br />        display=&#8217;\1\2&#8242;<br />        transfer=&#8217;sip:\1\2@$host$&#8217;<br />        /&gt;<br />    &lt;rule pattern=&#8217;1\s*\((\d{3})\)\s*(\d)&#8217;<br />        dial=&#8217;sip:1\1\2@$host$&#8217;<br />        display=&#8217;1\1\2&#8242;<br />        transfer=&#8217;sip:1\1\2@$host$&#8217;<br />        /&gt;<br />    &lt;!&#8211; Only digits &#8211;&gt;<br />    &lt;rule pattern='(\d+)&#8217;<br />        dial=&#8217;sip:\1@$host$&#8217;<br />        display=&#8217;\1&#8242;<br />        transfer=&#8217;sip:\1@$host$&#8217;<br />        /&gt;<br />&lt;/dialplan&gt;</p>
